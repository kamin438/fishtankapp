{"ast":null,"code":"import React, { forwardRef, useState, useRef, useImperativeHandle, useCallback, useEffect, Children } from 'react';\nimport { findFirstFocusableNodeIncludingDisabled, focusNextFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { setActivatorAttributes } from './set-activator-attributes.js';\nimport { Portal } from '../Portal/Portal.js';\nimport { PopoverOverlay, PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nexport { PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nimport { Pane } from './components/Pane/Pane.js';\nimport { Section } from './components/Section/Section.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js'; // TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\n\nconst PopoverComponent = /*#__PURE__*/forwardRef(function Popover(_ref, ref) {\n  let {\n    activatorWrapper = 'div',\n    children,\n    onClose,\n    activator,\n    preventFocusOnClose,\n    active,\n    fixed,\n    ariaHaspopup,\n    preferInputActivator = true,\n    colorScheme,\n    zIndexOverride,\n    ...rest\n  } = _ref;\n  const [activatorNode, setActivatorNode] = useState();\n  const overlayRef = useRef(null);\n  const activatorContainer = useRef(null);\n  const WrapperComponent = activatorWrapper;\n  const id = useUniqueId('popover');\n\n  function forceUpdatePosition() {\n    var _overlayRef$current;\n\n    (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.forceUpdatePosition();\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      forceUpdatePosition\n    };\n  });\n  const setAccessibilityAttributes = useCallback(() => {\n    if (activatorContainer.current == null) {\n      return;\n    }\n\n    const firstFocusable = findFirstFocusableNodeIncludingDisabled(activatorContainer.current);\n    const focusableActivator = firstFocusable || activatorContainer.current;\n    const activatorDisabled = 'disabled' in focusableActivator && Boolean(focusableActivator.disabled);\n    setActivatorAttributes(focusableActivator, {\n      id,\n      active,\n      ariaHaspopup,\n      activatorDisabled\n    });\n  }, [id, active, ariaHaspopup]);\n\n  const handleClose = source => {\n    onClose(source);\n\n    if (activatorContainer.current == null || preventFocusOnClose) {\n      return;\n    }\n\n    if ((source === PopoverCloseSource.FocusOut || source === PopoverCloseSource.EscapeKeypress) && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n\n      if (!focusNextFocusableNode(focusableActivator, isInPortal)) {\n        focusableActivator.focus();\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    } else if (activatorNode && activatorContainer.current && !activatorContainer.current.contains(activatorNode)) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  useEffect(() => {\n    if (activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  const portal = activatorNode ? /*#__PURE__*/React.createElement(Portal, {\n    idPrefix: \"popover\"\n  }, /*#__PURE__*/React.createElement(PopoverOverlay, Object.assign({\n    ref: overlayRef,\n    id: id,\n    activator: activatorNode,\n    preferInputActivator: preferInputActivator,\n    onClose: handleClose,\n    active: active,\n    fixed: fixed,\n    colorScheme: colorScheme,\n    zIndexOverride: zIndexOverride\n  }, rest), children)) : null;\n  return /*#__PURE__*/React.createElement(WrapperComponent, {\n    ref: activatorContainer\n  }, Children.only(activator), portal);\n});\n\nfunction isInPortal(element) {\n  let parentElement = element.parentElement;\n\n  while (parentElement) {\n    if (parentElement.matches(portal.selector)) return false;\n    parentElement = parentElement.parentElement;\n  }\n\n  return true;\n}\n\nconst Popover = Object.assign(PopoverComponent, {\n  Pane,\n  Section\n});\nexport { Popover };","map":{"version":3,"names":["React","forwardRef","useState","useRef","useImperativeHandle","useCallback","useEffect","Children","findFirstFocusableNodeIncludingDisabled","focusNextFocusableNode","portal","setActivatorAttributes","Portal","PopoverOverlay","PopoverCloseSource","Pane","Section","useUniqueId","PopoverComponent","Popover","ref","activatorWrapper","children","onClose","activator","preventFocusOnClose","active","fixed","ariaHaspopup","preferInputActivator","colorScheme","zIndexOverride","rest","activatorNode","setActivatorNode","overlayRef","activatorContainer","WrapperComponent","id","forceUpdatePosition","_overlayRef$current","current","setAccessibilityAttributes","firstFocusable","focusableActivator","activatorDisabled","Boolean","disabled","handleClose","source","FocusOut","EscapeKeypress","isInPortal","focus","firstElementChild","contains","createElement","idPrefix","Object","assign","only","element","parentElement","matches","selector"],"sources":["/Users/kevalamin/Projects/fishtankapp/client/node_modules/@shopify/polaris/build/esm/components/Popover/Popover.js"],"sourcesContent":["import React, { forwardRef, useState, useRef, useImperativeHandle, useCallback, useEffect, Children } from 'react';\nimport { findFirstFocusableNodeIncludingDisabled, focusNextFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { setActivatorAttributes } from './set-activator-attributes.js';\nimport { Portal } from '../Portal/Portal.js';\nimport { PopoverOverlay, PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nexport { PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nimport { Pane } from './components/Pane/Pane.js';\nimport { Section } from './components/Section/Section.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\n\n// TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\nconst PopoverComponent = /*#__PURE__*/forwardRef(function Popover({\n  activatorWrapper = 'div',\n  children,\n  onClose,\n  activator,\n  preventFocusOnClose,\n  active,\n  fixed,\n  ariaHaspopup,\n  preferInputActivator = true,\n  colorScheme,\n  zIndexOverride,\n  ...rest\n}, ref) {\n  const [activatorNode, setActivatorNode] = useState();\n  const overlayRef = useRef(null);\n  const activatorContainer = useRef(null);\n  const WrapperComponent = activatorWrapper;\n  const id = useUniqueId('popover');\n\n  function forceUpdatePosition() {\n    var _overlayRef$current;\n\n    (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.forceUpdatePosition();\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      forceUpdatePosition\n    };\n  });\n  const setAccessibilityAttributes = useCallback(() => {\n    if (activatorContainer.current == null) {\n      return;\n    }\n\n    const firstFocusable = findFirstFocusableNodeIncludingDisabled(activatorContainer.current);\n    const focusableActivator = firstFocusable || activatorContainer.current;\n    const activatorDisabled = 'disabled' in focusableActivator && Boolean(focusableActivator.disabled);\n    setActivatorAttributes(focusableActivator, {\n      id,\n      active,\n      ariaHaspopup,\n      activatorDisabled\n    });\n  }, [id, active, ariaHaspopup]);\n\n  const handleClose = source => {\n    onClose(source);\n\n    if (activatorContainer.current == null || preventFocusOnClose) {\n      return;\n    }\n\n    if ((source === PopoverCloseSource.FocusOut || source === PopoverCloseSource.EscapeKeypress) && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n\n      if (!focusNextFocusableNode(focusableActivator, isInPortal)) {\n        focusableActivator.focus();\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    } else if (activatorNode && activatorContainer.current && !activatorContainer.current.contains(activatorNode)) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  useEffect(() => {\n    if (activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  const portal = activatorNode ? /*#__PURE__*/React.createElement(Portal, {\n    idPrefix: \"popover\"\n  }, /*#__PURE__*/React.createElement(PopoverOverlay, Object.assign({\n    ref: overlayRef,\n    id: id,\n    activator: activatorNode,\n    preferInputActivator: preferInputActivator,\n    onClose: handleClose,\n    active: active,\n    fixed: fixed,\n    colorScheme: colorScheme,\n    zIndexOverride: zIndexOverride\n  }, rest), children)) : null;\n  return /*#__PURE__*/React.createElement(WrapperComponent, {\n    ref: activatorContainer\n  }, Children.only(activator), portal);\n});\n\nfunction isInPortal(element) {\n  let parentElement = element.parentElement;\n\n  while (parentElement) {\n    if (parentElement.matches(portal.selector)) return false;\n    parentElement = parentElement.parentElement;\n  }\n\n  return true;\n}\n\nconst Popover = Object.assign(PopoverComponent, {\n  Pane,\n  Section\n});\n\nexport { Popover };\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,MAAtC,EAA8CC,mBAA9C,EAAmEC,WAAnE,EAAgFC,SAAhF,EAA2FC,QAA3F,QAA2G,OAA3G;AACA,SAASC,uCAAT,EAAkDC,sBAAlD,QAAgF,0BAAhF;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,sBAAT,QAAuC,+BAAvC;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,cAAT,EAAyBC,kBAAzB,QAAmD,+CAAnD;AACA,SAASA,kBAAT,QAAmC,+CAAnC;AACA,SAASC,IAAT,QAAqB,2BAArB;AACA,SAASC,OAAT,QAAwB,iCAAxB;AACA,SAASC,WAAT,QAA4B,oCAA5B,C,CAEA;AACA;AACA;AACA;;AACA,MAAMC,gBAAgB,GAAG,aAAajB,UAAU,CAAC,SAASkB,OAAT,OAa9CC,GAb8C,EAazC;EAAA,IAb0D;IAChEC,gBAAgB,GAAG,KAD6C;IAEhEC,QAFgE;IAGhEC,OAHgE;IAIhEC,SAJgE;IAKhEC,mBALgE;IAMhEC,MANgE;IAOhEC,KAPgE;IAQhEC,YARgE;IAShEC,oBAAoB,GAAG,IATyC;IAUhEC,WAVgE;IAWhEC,cAXgE;IAYhE,GAAGC;EAZ6D,CAa1D;EACN,MAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoChC,QAAQ,EAAlD;EACA,MAAMiC,UAAU,GAAGhC,MAAM,CAAC,IAAD,CAAzB;EACA,MAAMiC,kBAAkB,GAAGjC,MAAM,CAAC,IAAD,CAAjC;EACA,MAAMkC,gBAAgB,GAAGhB,gBAAzB;EACA,MAAMiB,EAAE,GAAGrB,WAAW,CAAC,SAAD,CAAtB;;EAEA,SAASsB,mBAAT,GAA+B;IAC7B,IAAIC,mBAAJ;;IAEA,CAACA,mBAAmB,GAAGL,UAAU,CAACM,OAAlC,MAA+C,IAA/C,IAAuDD,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiGA,mBAAmB,CAACD,mBAApB,EAAjG;EACD;;EAEDnC,mBAAmB,CAACgB,GAAD,EAAM,MAAM;IAC7B,OAAO;MACLmB;IADK,CAAP;EAGD,CAJkB,CAAnB;EAKA,MAAMG,0BAA0B,GAAGrC,WAAW,CAAC,MAAM;IACnD,IAAI+B,kBAAkB,CAACK,OAAnB,IAA8B,IAAlC,EAAwC;MACtC;IACD;;IAED,MAAME,cAAc,GAAGnC,uCAAuC,CAAC4B,kBAAkB,CAACK,OAApB,CAA9D;IACA,MAAMG,kBAAkB,GAAGD,cAAc,IAAIP,kBAAkB,CAACK,OAAhE;IACA,MAAMI,iBAAiB,GAAG,cAAcD,kBAAd,IAAoCE,OAAO,CAACF,kBAAkB,CAACG,QAApB,CAArE;IACApC,sBAAsB,CAACiC,kBAAD,EAAqB;MACzCN,EADyC;MAEzCZ,MAFyC;MAGzCE,YAHyC;MAIzCiB;IAJyC,CAArB,CAAtB;EAMD,CAd6C,EAc3C,CAACP,EAAD,EAAKZ,MAAL,EAAaE,YAAb,CAd2C,CAA9C;;EAgBA,MAAMoB,WAAW,GAAGC,MAAM,IAAI;IAC5B1B,OAAO,CAAC0B,MAAD,CAAP;;IAEA,IAAIb,kBAAkB,CAACK,OAAnB,IAA8B,IAA9B,IAAsChB,mBAA1C,EAA+D;MAC7D;IACD;;IAED,IAAI,CAACwB,MAAM,KAAKnC,kBAAkB,CAACoC,QAA9B,IAA0CD,MAAM,KAAKnC,kBAAkB,CAACqC,cAAzE,KAA4FlB,aAAhG,EAA+G;MAC7G,MAAMW,kBAAkB,GAAGpC,uCAAuC,CAACyB,aAAD,CAAvC,IAA0DzB,uCAAuC,CAAC4B,kBAAkB,CAACK,OAApB,CAAjG,IAAiIL,kBAAkB,CAACK,OAA/K;;MAEA,IAAI,CAAChC,sBAAsB,CAACmC,kBAAD,EAAqBQ,UAArB,CAA3B,EAA6D;QAC3DR,kBAAkB,CAACS,KAAnB;MACD;IACF;EACF,CAdD;;EAgBA/C,SAAS,CAAC,MAAM;IACd,IAAI,CAAC2B,aAAD,IAAkBG,kBAAkB,CAACK,OAAzC,EAAkD;MAChDP,gBAAgB,CAACE,kBAAkB,CAACK,OAAnB,CAA2Ba,iBAA5B,CAAhB;IACD,CAFD,MAEO,IAAIrB,aAAa,IAAIG,kBAAkB,CAACK,OAApC,IAA+C,CAACL,kBAAkB,CAACK,OAAnB,CAA2Bc,QAA3B,CAAoCtB,aAApC,CAApD,EAAwG;MAC7GC,gBAAgB,CAACE,kBAAkB,CAACK,OAAnB,CAA2Ba,iBAA5B,CAAhB;IACD;;IAEDZ,0BAA0B;EAC3B,CARQ,EAQN,CAACT,aAAD,EAAgBS,0BAAhB,CARM,CAAT;EASApC,SAAS,CAAC,MAAM;IACd,IAAI2B,aAAa,IAAIG,kBAAkB,CAACK,OAAxC,EAAiD;MAC/CP,gBAAgB,CAACE,kBAAkB,CAACK,OAAnB,CAA2Ba,iBAA5B,CAAhB;IACD;;IAEDZ,0BAA0B;EAC3B,CANQ,EAMN,CAACT,aAAD,EAAgBS,0BAAhB,CANM,CAAT;EAOA,MAAMhC,MAAM,GAAGuB,aAAa,GAAG,aAAajC,KAAK,CAACwD,aAAN,CAAoB5C,MAApB,EAA4B;IACtE6C,QAAQ,EAAE;EAD4D,CAA5B,EAEzC,aAAazD,KAAK,CAACwD,aAAN,CAAoB3C,cAApB,EAAoC6C,MAAM,CAACC,MAAP,CAAc;IAChEvC,GAAG,EAAEe,UAD2D;IAEhEG,EAAE,EAAEA,EAF4D;IAGhEd,SAAS,EAAES,aAHqD;IAIhEJ,oBAAoB,EAAEA,oBAJ0C;IAKhEN,OAAO,EAAEyB,WALuD;IAMhEtB,MAAM,EAAEA,MANwD;IAOhEC,KAAK,EAAEA,KAPyD;IAQhEG,WAAW,EAAEA,WARmD;IAShEC,cAAc,EAAEA;EATgD,CAAd,EAUjDC,IAViD,CAApC,EAUNV,QAVM,CAF4B,CAAhB,GAYL,IAZvB;EAaA,OAAO,aAAatB,KAAK,CAACwD,aAAN,CAAoBnB,gBAApB,EAAsC;IACxDjB,GAAG,EAAEgB;EADmD,CAAtC,EAEjB7B,QAAQ,CAACqD,IAAT,CAAcpC,SAAd,CAFiB,EAESd,MAFT,CAApB;AAGD,CA/F+C,CAAhD;;AAiGA,SAAS0C,UAAT,CAAoBS,OAApB,EAA6B;EAC3B,IAAIC,aAAa,GAAGD,OAAO,CAACC,aAA5B;;EAEA,OAAOA,aAAP,EAAsB;IACpB,IAAIA,aAAa,CAACC,OAAd,CAAsBrD,MAAM,CAACsD,QAA7B,CAAJ,EAA4C,OAAO,KAAP;IAC5CF,aAAa,GAAGA,aAAa,CAACA,aAA9B;EACD;;EAED,OAAO,IAAP;AACD;;AAED,MAAM3C,OAAO,GAAGuC,MAAM,CAACC,MAAP,CAAczC,gBAAd,EAAgC;EAC9CH,IAD8C;EAE9CC;AAF8C,CAAhC,CAAhB;AAKA,SAASG,OAAT"},"metadata":{},"sourceType":"module"}